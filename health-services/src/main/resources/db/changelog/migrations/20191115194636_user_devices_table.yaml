databaseChangeLog:
  - changeSet:
    id: 20191115194636
    author: cebartling
    changes:
      - createTable:
          tableName: user_devices
          columns:
            - column:
                name: id
                type: uuid
                defaultValue: uuid_generate_v4()
                constraints:
                  primaryKey: true
                  nullable: false
            - column:
                name: user_id
                type: uuid
                constraints:
                  nullable: false
            - column:
                name: name
                type: varchar(150)
                constraints:
                  nullable: false
            - column:
                name: created_at
                type: timestamp
                defaultValueDate: now()
                constraints:
                  nullable: false
            - column:
                name: updated_at
                type: timestamp
                defaultValueDate: now()
                constraints:
                  nullable: false
      - addForeignKeyConstraint:
          baseColumnNames: user_id
          baseTableName: user_devices
          baseTableSchemaName: public
          constraintName: fk_user_devices_user_id
          deferrable: true
          initiallyDeferred: true
          onDelete: NO ACTION
          onUpdate: NO ACTION
          referencedColumnNames: id
          referencedTableName: users
          referencedTableSchemaName: public
          validate: true
    rollback:
      - dropTable:
          tableName: user_devices
