plugins {
    id 'org.springframework.boot' version '2.1.8.RELEASE'
    id 'io.spring.dependency-management' version '1.0.8.RELEASE'
    id 'java'
    id "org.liquibase.gradle" version "2.0.1"
}

group = 'org.myhealthtrax'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '11'

configurations {
    developmentOnly
    runtimeClasspath {
        extendsFrom developmentOnly
    }
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-actuator'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-web'
    developmentOnly 'org.springframework.boot:spring-boot-devtools'
    runtimeOnly 'org.postgresql:postgresql'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    liquibaseRuntime 'org.liquibase:liquibase-core:3.8.0'
    liquibaseRuntime 'org.liquibase:liquibase-groovy-dsl:2.1.0'
    liquibaseRuntime 'org.postgresql:postgresql'
}

liquibase {
    mainClassName 'org.liquibase.gradle.OutputEnablingLiquibaseRunner'
//    activities {
//        main {
//            changeLogFile 'changelog.groovy'
//            url 'jdbc:h2:db/liquibase_workshop;FILE_LOCK=NO'
//            username 'sa'
//            password ''
//            // driver 'com.mysql.jdbc.Driver'
//
//            changeLogParameters([ myToken: myValue,
//                                  second: 'secondValue'])
//            // changeLogParameters([ myToken: 'myParamValue',
//            // second: 'secondValue'])
//        }
//        second {
//            changeLogFile 'second.groovy'
//            url 'jdbc:h2:db/liquibase_workshop;FILE_LOCK=NO'
//            username 'sa'
//            password ''
//            changeLogParameters([ myToken: 'myvalue',
//                                  second: 'secondValue'])
//        }
//    }
//
//    // runList = project.ext.runList
//    // runList = 'main'
//    runList = 'main, second'
}